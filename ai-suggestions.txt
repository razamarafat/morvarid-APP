
AI SUGGESTIONS BACKLOG - V47

--------------------------------
1. پیشنهادات امنیت و مدیریت کاربران (Security & Auth)
--------------------------------
- [ ] عنوان: Two-Factor Authentication (2FA)
  - دسته‌بندی: Security
  - توضیح: پیاده‌سازی احراز هویت دو مرحله‌ای (TOTP) برای نقش‌های مدیریتی (Admin/Sales).
  - اولویت: High

- [ ] عنوان: DB Rate Limiting for Admin Actions
  - دسته‌بندی: Security/Backend
  - توضیح: افزودن محدودیت زمانی در تابع RPC تا ادمین نتواند در هر دقیقه بیش از ۵ کاربر بسازد (جلوگیری از اسپم).
  - اولویت: Medium

- [ ] عنوان: Database Audit Logging
  - دسته‌بندی: Security/Backend
  - توضیح: ایجاد جدول audit_logs و تریگرهای دیتابیس برای ثبت خودکار هرگونه تغییر روی جداول حساس توسط توابع SQL.
  - اولویت: Medium

- [ ] عنوان: Session Invalidation on Role Change
  - دسته‌بندی: Security/Backend
  - توضیح: وقتی نقش کاربر توسط ادمین تغییر می‌کند، یک رکورد در جدول auth.sessions یا معادل آن دستکاری شود تا توکن کاربر بلافاصله منقضی شود.
  - اولویت: High

- [ ] عنوان: Input Sanitation Utility
  - دسته‌بندی: Security
  - توضیح: ایجاد یک فایل utils/sanitizers.ts برای پاکسازی ورودی‌های متنی از کاراکترهای خطرناک (XSS Prevention) و نوشتن تست برای آن.
  - اولویت: High

--------------------------------
2. پیشنهادات بهره‌وری و پرفورمنس (Performance)
--------------------------------
- [ ] عنوان: Database RPC Functions for Reporting
  - دسته‌بندی: Backend/Performance
  - توضیح: انتقال محاسبات سنگین (مانند جمع‌بندی آمارهای ماهانه) به سمت دیتابیس با استفاده از توابع Postgres RPC.
  - اولویت: Medium

- [ ] عنوان: Database Health Check RPC
  - دسته‌بندی: DevOps/Performance
  - توضیح: تبدیل لاجیک "Health Check" که الان در AdminDashboard سمت کلاینت است به یک تابع RPC سبک برای کاهش ترافیک شبکه.
  - اولویت: Low

--------------------------------
3. پیشنهادات رابط کاربری و تجربه کاربری (UI/UX)
--------------------------------
- [ ] عنوان: Password Visibility Toggle in Admin Panel
  - دسته‌بندی: UX/Admin
  - توضیح: افزودن دکمه مشاهده رمز عبور در مودال ساخت کاربر توسط ادمین برای اطمینان از تایپ صحیح.
  - اولویت: Low

- [ ] عنوان: PDF Report Generation
  - دسته‌بندی: UX/Reporting
  - توضیح: قابلیت تولید فایل PDF از حواله‌ها و گزارشات برای پرینت و بایگانی رسمی.
  - اولویت: High

- [ ] عنوان: Input Masking for Phone/Plate
  - دسته‌بندی: UX/Forms
  - توضیح: استفاده از کتابخانه‌های ماسک‌گذاری یا لاجیک کاستوم برای فرمت‌دهی خودکار شماره موبایل و پلاک خودرو حین تایپ.
  - اولویت: Medium

- [ ] عنوان: System Announcement System
  - دسته‌بندی: Feature/UX
  - توضیح: قابلیت ارسال پیام‌های سیستمی توسط ادمین که در بالای داشبورد تمام کاربران نمایش داده شود (مثل اطلاعیه تعمیرات).
  - اولویت: Low

- [ ] عنوان: Undo/Redo for Statistics Form
  - دسته‌بندی: UX/Features
  - توضیح: اضافه کردن قابلیت بازگشت به عقب (Undo) در فرم ثبت آمار برای جلوگیری از اشتباهات تایپی سریع.
  - اولویت: Low

--------------------------------
4. پیشنهادات ساختار کد و دواپس (DevOps & Refactoring)
--------------------------------
- [ ] عنوان: Coverage Thresholds in Vitest
  - دسته‌بندی: DevOps/Quality
  - توضیح: تنظیم حداقل درصد پوشش کد (مثلاً 80%) در vitest.config.ts برای اطمینان از کیفیت تست‌ها.
  - اولویت: Low

- [ ] عنوان: Snapshot Testing for UI
  - دسته‌بندی: Testing
  - توضیح: استفاده از قابلیت Snapshot تست Vitest برای کامپوننت‌های UI حساس مثل فرم‌ها و کارت‌ها جهت جلوگیری از تغییرات ناخواسته.
  - اولویت: Medium

- [ ] عنوان: Invoice Number Sequence Table
  - دسته‌بندی: Data Integrity
  - توضیح: به جای تکیه بر کلاینت یا شمارش رکوردها، یک جدول sequences برای تولید شماره حواله یکتا و بدون تداخل (Concurrency Safe) ایجاد شود.
  - اولویت: High

- [ ] عنوان: E2E Testing with Playwright
  - دسته‌بندی: DevOps/QA
  - توضیح: اضافه کردن تست‌های End-to-End برای سناریوی کامل "ثبت حواله" جهت اطمینان از عملکرد کل سیستم.
  - اولویت: Medium

- [ ] عنوان: Husky Pre-commit Hooks
  - دسته‌بندی: DevOps/Git
  - توضیح: تنظیم هوک‌های گیت برای اجرای خودکار npm run test قبل از هر کامیت جهت جلوگیری از ورود کدهای خراب.
  - اولویت: Low

- [ ] عنوان: Mock Service Worker (MSW)
  - دسته‌بندی: Testing
  - توضیح: برای شبیه‌سازی درخواست‌های Supabase در محیط تست بدون نیاز به دیتابیس واقعی.
  - اولویت: Medium
