AI SUGGESTIONS BACKLOG - V55

--------------------------------
1. پیشنهادات امنیت و مدیریت کاربران (Security & Auth)
--------------------------------
- [ ] عنوان: Two-Factor Authentication (2FA)
  - دسته‌بندی: Security
  - توضیح: پیاده‌سازی احراز هویت دو مرحله‌ای (TOTP) برای نقش‌های مدیریتی (Admin/Sales).
  - اولویت: High

- [ ] عنوان: DB Rate Limiting for Admin Actions
  - دسته‌بندی: Security/Backend
  - توضیح: افزودن محدودیت زمانی در تابع RPC تا ادمین نتواند در هر دقیقه بیش از ۵ کاربر بسازد (جلوگیری از اسپم).
  - اولویت: Medium

- [ ] عنوان: Database Audit Logging
  - دسته‌بندی: Security/Backend
  - توضیح: ایجاد جدول audit_logs و تریگرهای دیتابیس برای ثبت خودکار هرگونه تغییر روی جداول حساس توسط توابع SQL.
  - اولویت: Medium

- [ ] عنوان: Session Invalidation on Role Change
  - دسته‌بندی: Security/Backend
  - توضیح: وقتی نقش کاربر توسط ادمین تغییر می‌کند، یک رکورد در جدول auth.sessions یا معادل آن دستکاری شود تا توکن کاربر بلافاصله منقضی شود.
  - اولویت: High


--------------------------------
2. پیشنهادات بهره‌وری و پرفورمنس (Performance)
--------------------------------
- [ ] عنوان: Database RPC Functions for Reporting
  - دسته‌بندی: Backend/Performance
  - توضیح: انتقال محاسبات سنگین (مانند جمع‌بندی آمارهای ماهانه) به سمت دیتابیس با استفاده از توابع Postgres RPC.
  - اولویت: Medium

- [ ] عنوان: Database Health Check RPC
  - دسته‌بندی: DevOps/Performance
  - توضیح: تبدیل لاجیک "Health Check" که الان در AdminDashboard سمت کلاینت است به یک تابع RPC سبک برای کاهش ترافیک شبکه.
  - اولویت: Low

- [ ] عنوان: IndexedDB Cache for Recent Records
  - دسته‌بندی: Performance/Offline
  - توضیح: نگهداری کش با IndexedDB برای Recent Records جهت کاهش کوئری‌های تکراری، پشتیبانی آفلاین و افزایش سرعت بارگذاری اولیه.
  - اولویت: High

- [ ] عنوان: Infinite Scroll for Tables
  - دسته‌بندی: Performance/UX
  - توضیح: جایگزینی محدودیت ثابت رکوردها با اسکرول نامحدود جهت بهبود سرعت لود اولیه در جداول حجیم.
  - اولویت: High

- [ ] عنوان: Debounced Date Range Filter
  - دسته‌بندی: Performance
  - توضیح: تاخیر کوتاه در فچ کردن هنگام تغییر تاریخ تا جلوگیری از درخواست‌های اضافی و بهبود پرفورمنس.
  - اولویت: High

- [ ] عنوان: Zustand Persistence for Lists
  - دسته‌بندی: Performance/Offline
  - توضیح: ذخیره‌سازی لیست‌های فچ شده در localStorage/IndexedDB با استفاده از persist middleware برای نمایش آنی داده‌ها هنگام لود مجدد صفحه.
  - اولویت: High

- [ ] عنوان: Log Batching & Background Sync
  - دسته‌بندی: Performance/DevOps
  - توضیح: تجمیع لاگ‌ها در localStorage و ارسال دسته‌ای آن‌ها به سرور (Batch Send) برای کاهش تعداد درخواست‌های شبکه و بهینه‌سازی مصرف باتری.
  - اولویت: Medium

--------------------------------
3. پیشنهادات رابط کاربری و تجربه کاربری (UI/UX)
--------------------------------
- [ ] عنوان: Password Visibility Toggle in Admin Panel
  - دسته‌بندی: UX/Admin
  - توضیح: افزودن دکمه مشاهده رمز عبور در مودال ساخت کاربر توسط ادمین برای اطمینان از تایپ صحیح.
  - اولویت: Low

- [ ] عنوان: PDF Report Generation
  - دسته‌بندی: UX/Reporting
  - توضیح: قابلیت تولید فایل PDF از حواله‌ها و گزارشات برای پرینت و بایگانی رسمی.
  - اولویت: High

- [ ] عنوان: Input Masking for Phone/Plate
  - دسته‌بندی: UX/Forms
  - توضیح: استفاده از کتابخانه‌های ماسک‌گذاری یا لاجیک کاستوم برای فرمت‌دهی خودکار شماره موبایل و پلاک خودرو حین تایپ.
  - اولویت: Medium

- [ ] عنوان: System Announcement System
  - دسته‌بندی: Feature/UX
  - توضیح: قابلیت ارسال پیام‌های سیستمی توسط ادمین که در بالای داشبورد تمام کاربران نمایش داده شود (مثل اطلاعیه تعمیرات).
  - اولویت: Low

- [ ] عنوان: Command Palette (Ctrl+K)
  - دسته‌بندی: UI/UX
  - توضیح: ایجاد یک منوی جستجوی سریع که با کلید میانبر باز شود و امکان دسترسی سریع به صفحات مختلف یا جستجوی کاربر/حواله را بدهد.
  - اولویت: Medium

- [ ] عنوان: High Contrast Mode
  - دسته‌بندی: Accessibility
  - توضیح: افزودن حالت کنتراست بالا برای کاربران با بینایی ضعیف، علاوه بر تم تاریک و روشن موجود.
  - اولویت: Low

- [ ] عنوان: Live Change Log Banner
  - دسته‌بندی: UI/UX
  - توضیح: یک بنر کوچک در داشبورد که تغییرات نسخه (از `src/constants.ts`) را خوانده و خلاصه‌ای از آخرین تغییرات را نشان می‌دهد تا تیم و کاربران از آپدیت‌ها مطلع باشند.
  - اولویت: Medium

- [ ] عنوان: Skeleton Loaders for Reports
  - دسته‌بندی: UI/UX
  - توضیح: نمایش اسکلتون‌های زیبا هنگام بارگذاری گزارش‌ها برای کاهش حس انتظار کاربر.
  - اولویت: Medium

- [ ] عنوان: Copy to clipboard for user credentials
  - دسته‌بندی: UI/UX
  - توضیح: Add a "copy to clipboard" button for the generated username and password in the `UserFormModal` to improve user experience.
  - اولویت: Low

--------------------------------
4. پیشنهادات ساختار کد و دواپس (DevOps & Refactoring)
--------------------------------
- [ ] عنوان: Strict File Structure Linting
  - دسته‌بندی: DevOps/Code Quality
  - توضیح: افزودن eslint-plugin-project-structure برای جلوگیری از ایجاد فایل در روت پروژه و اجبار به رعایت ساختار src.
  - اولویت: Medium

- [ ] عنوان: Barrel Exports Implementation
  - دسته‌بندی: Refactoring
  - توضیح: ایجاد فایل‌های index.ts در هر پوشه (components, hooks, etc.) برای تمیز کردن ایمپورت‌ها و کپسوله‌سازی ماژول‌ها.
  - اولویت: Low

- [ ] عنوان: Path Alias Enforcement Rule
  - دسته‌بندی: Code Quality
  - توضیح: اضافه کردن قانون ESLint برای جلوگیری از ایمپورت‌های نسبی طولانی (../../) و اجبار به استفاده از alias (@/).
  - اولویت: Low

- [ ] عنوان: Automatic Unused File Cleanup
  - دسته‌بندی: Maintenance
  - توضیح: ایجاد اسکریپت یا استفاده از ابزار knip برای شناسایی و حذف فایل‌های یتیم و بدون استفاده در پروژه.
  - اولویت: Low

- [ ] عنوان: Coverage Thresholds in Vitest
  - دسته‌بندی: DevOps/Quality
  - توضیح: تنظیم حداقل درصد پوشش کد (مثلاً 80%) در vitest.config.ts برای اطمینان از کیفیت تست‌ها.
  - اولویت: Low

- [ ] عنوان: Automated Constants Sync Script
  - دسته‌بندی: DevOps/Code Quality
  - توضیح: اسکریپتی که `APP_VERSION` را بین `src/constants.ts` و `package.json` همگام‌سازی می‌کند و در CI اجرا شده و در صورت ناسازگاری خطا می‌دهد.
  - اولویت: Medium

- [ ] عنوان: Centralized Zod Schema File
  - دسته‌بندی: Code Quality
  - توضیح: Create a centralized `zod` schema file for common validation patterns like Persian-only strings, mobile numbers, etc., to avoid duplication and ensure consistency.
  - اولویت: Medium

--------------------------------
5. پیشنهادات PWA & Mobile (PWA Growth)
--------------------------------
- [ ] عنوان: PWA Periodic Background Sync
  - دسته‌بندی: PWA/Offline
  - توضیح: استفاده از Background Sync API برای ارسال داده‌های آفلاین به محض اتصال به اینترنت، حتی اگر برنامه بسته باشد.
  - اولویت: High

- [ ] عنوان: Custom Install Prompt (PWA)
  - دسته‌بندی: PWA/UX
  - توضیح: جلوگیری از پرامپت پیش‌فرض مرورگر و نمایش یک دکمه نصب زیبا داخل UI برنامه (`beforeinstallprompt` event).
  - اولویت: Medium

- [ ] عنوان: Share Target API Integration
  - دسته‌بندی: PWA/Feature
  - توضیح: امکان دریافت فایل (مثلاً فکس یا اکسل) از برنامه‌های دیگر (مثل واتس‌اپ) مستقیماً درون اپلیکیشن مروارید.
  - اولویت: Low

- [ ] عنوان: Navigation Preload Strategy
  - دسته‌بندی: PWA/Performance
  - توضیح: فعال‌سازی Navigation Preload در Service Worker برای کاهش تاخیر هنگام لود اولیه صفحه.
  - اولویت: Medium

--------------------------------
6. پیشنهادات خلاقانه (Creative Features)
--------------------------------
- [ ] عنوان: Quick-Entry Presets
  - دسته‌بندی: Feature/Creative
  - توضیح: امکان ذخیره قالب‌های پرکاربرد (preset fields) برای ثبت حواله تا کاربران بتوانند با یک کلیک فرم را پر و ثبت کنند.
  - اولویت: Medium

- [ ] عنوان: Visual Success Confirmation Animation
  - دسته‌بندی: Creative/UX
  - توضیح: اجرای یک انیمیشن کوتاه و جذاب (مثل ذرات رنگی یا تیک متحرک) روی کارت به محض تبدیل وضعیت از "در حال ارسال" به "ثبت شده".
  - اولویت: Medium

- [ ] عنوان: Production Forecasting
  - دسته‌بندی: Feature/Creative
  - توضیح: تحلیل آمارهای گذشته برای پیش‌بینی هوشمند میزان تولید روزهای آینده با استفاده از میانگین متحرک.
  - اولویت: Low
  
- [ ] عنوان: Expanded Drafts Feature
  - دسته‌بندی: Feature/Creative
  - توضیح: Expand the existing auto-save functionality in the InvoiceForm to show a list of saved drafts, allowing users to restore or delete them.
  - اولویت: Medium

--------------------------------
7. پیشنهادات دیتابیس (Database Growth)
--------------------------------
- [ ] عنوان: Database Indexing Strategy
  - دسته‌بندی: Database/Performance
  - توضیح: ایجاد ایندکس‌های مناسب روی ستون‌های پرکاربرد مثل `farm_id`, `date`, `created_by` برای افزایش سرعت کوئری‌ها.
  - اولویت: Medium

- [ ] عنوان: Partitioning for Invoices
  - دسته‌بندی: Database/Scalability
  - توضیح: پارتیشن‌بندی جدول `invoices` بر اساس سال یا ماه برای بهینه‌سازی پرفورمنس در حجم بالا.
  - اولویت: Low

- [ ] عنوان: Database Read Replica Setup
  - دسته‌بندی: Database/Scalability
  - توضیح: تنظیم رپلیکای فقط-خواندنی برای گزارشات سنگین جهت جلوگیری از فشار روی دیتابیس اصلی.
  - اولویت: Low

- [ ] عنوان: Polymorphic Comments Table
  - دسته‌بندی: Feature/Database
  - توضیح: طراحی جدول نظرات به صورت پلی‌مورفیک برای قابلیت ثبت نظر روی حواله‌ها، فارم‌ها یا کاربران در آینده.
  - اولویت: Low

- [ ] عنوان: Invoice Number Sequence Table
  - دسته‌بندی: Data Integrity
  - توضیح: به جای تکیه بر کلاینت یا شمارش رکوردها، یک جدول sequences برای تولید شماره حواله یکتا و بدون تداخل (Concurrency Safe) ایجاد شود.
  - اولویت: High
  
--------------------------------
8. پیشنهادات تست و کیفیت (Testing & Quality)
--------------------------------
- [ ] عنوان: Snapshot Testing for UI
  - دسته‌بندی: Testing
  - توضیح: استفاده از قابلیت Snapshot تست Vitest برای کامپوننت‌های UI حساس مثل فرم‌ها و کارت‌ها جهت جلوگیری از تغییرات ناخواسته.
  - اولویت: Medium

- [ ] عنوان: E2E Testing with Playwright
  - دسته‌بندی: DevOps/QA
  - توضیح: اضافه کردن تست‌های End-to-End برای سناریوی کامل "ثبت حواله" جهت اطمینان از عملکرد کل سیستم.
  - اولویت: Medium

- [ ] عنوان: Zustand Store Testing
  - دسته‌بندی: Testing/Logic
  - توضیح: نوشتن تست‌های جامع برای تغییرات وضعیت در `invoiceStore` و `statisticsStore` جهت اطمینان از عملکرد صحیح منطق بیزینس.
  - اولویت: High

- [ ] عنوان: Integration Tests for Offline Sync
  - دسته‌بندی: Testing/PWA
  - توضیح: شبیه‌سازی وضعیت آفلاین و تست انتقال رکوردها بین حالت‌های `isPending` و `isOffline` برای اطمینان از صحت همگام‌سازی.
  - اولویت: High

- [ ] عنوان: Virtualized List Performance Testing
  - دسته‌بندی: Testing/Performance
  - توضیح: Add performance tests for the FarmFormModal product list to measure rendering time with a large dataset after implementing virtualization.
  - اولویت: Medium

--------------------------------
9. پیشنهادات جدید (New Suggestions)
--------------------------------
- [ ] عنوان: Vite Build Analyzer
  - دسته‌بندی: DevOps/Performance
  - توضیح: Add `rollup-plugin-visualizer` to the Vite config to generate a visual report of the bundle composition. This helps identify large dependencies and optimize bundle sizes.
  - اولویت: Medium

- [ ] عنوان: Automated Dependency Updates
  - دسته‌بندی: DevOps/Maintenance
  - توضیح: Set up a GitHub Action with `dependabot` or a similar tool to automatically create pull requests for dependency updates, keeping the project secure and up-to-date.
  - اولویت: Medium

- [ ] عنوان: Error Boundary Component
  - دسته‌بندی: Code Quality/UX
  - توضیح: Create a generic `ErrorBoundary` component that can wrap different parts of the application (like routes or complex components) to catch JavaScript errors, log them, and display a user-friendly fallback UI instead of a white screen of death. The current `RouteErrorBoundary` can be generalized.
  - اولویت: High

- [ ] عنوان: Gamification: User Streaks
  - دسته‌بندی: Creative/UX
  - توضیح: Introduce a "streak" feature to encourage daily usage. A user maintains a streak for consecutive days they log in or register an invoice. Display the streak count prominently on the dashboard with a small fire icon.
  - اولویت: Low
